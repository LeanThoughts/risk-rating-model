<div id="risk-model-template" class="w-100-p p-16 tabView" fxLayout="column" fusePerfectScrollbar>
    <mat-tab-group [selectedIndex]="selectedIndex" (selectedIndexChange)="selectedIndexChange($event)">
        <mat-tab [label]="'Project & Risk Rating Results'">
            <mat-card style="margin-bottom: 15px;" class="SubTabs">
                <div fxLayout="row" class="bottomSpace">
                    <mat-form-field fxFlex="40" > 
                        <input matInput placeholder="Project Name" [(ngModel)]="riskModelTemplate.projectName">
						<mat-icon matSuffix class="mr-8">edit</mat-icon> 
                    </mat-form-field>
					
					
					 <!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Project Name</mat-label>
						<input matInput placeholder="Project Name" [(ngModel)]="riskModelTemplate.projectName">
					</mat-form-field-->
  
  
                    <mat-form-field fxFlex="30">
                        <input matInput placeholder="Loan Number" [(ngModel)]="riskModelTemplate.loanNumber" readonly>
                    </mat-form-field>
					
					 <!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Loan Number</mat-label>
						<input matInput placeholder="Loan Number" [(ngModel)]="riskModelTemplate.loanNumber" readonly>
					</mat-form-field-->
					
					
                    <mat-form-field fxFlex="30">
                        <input matInput placeholder="Risk Model Id" [(ngModel)]="riskModelTemplate.id" readonly>
                    </mat-form-field>
					
					 <!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Risk Model Id</mat-label>
						<input matInput placeholder="Risk Model Id" [(ngModel)]="riskModelTemplate.id" readonly>
					</mat-form-field-->
                </div>
                <div fxLayout="row" class="bottomSpace">
                    <mat-form-field fxFlex="40">
                        <input matInput placeholder="Project Type" [(ngModel)]="riskModelTemplate.riskProjectTypeDescription"
                            readonly>
                    </mat-form-field>
					
					 <!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Project Type</mat-label>
						  <input matInput placeholder="Project Type" [(ngModel)]="riskModelTemplate.riskProjectTypeDescription"
                            readonly>
					</mat-form-field-->
					
                    <mat-form-field fxFlex="30">
                        <input matInput placeholder="Loan Amount in Crores" [(ngModel)]="riskModelTemplate.loanAmountInCrores"
                            readonly>
                    </mat-form-field>
					
					<!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Loan Amount in Crores</mat-label>
						  <input matInput placeholder="Loan Amount in Crores" [(ngModel)]="riskModelTemplate.loanAmountInCrores"
                            readonly>
					</mat-form-field-->
					
					
                    <mat-form-field fxFlex>
                        <mat-select placeholder="Purpose" [(ngModel)]="riskModelTemplate.purposeCode" required>
                            <mat-option *ngFor="let purpose of purposes" [value]="purpose.code">
                                {{ purpose.description }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxLayout="row" class="bottomSpace">
                    <mat-form-field fxFlex="40">
                        <input matInput placeholder="Risk Level Type" [(ngModel)]="riskModelTemplate.projectRiskLevelDescription"
                            readonly>
                    </mat-form-field>
					
						<!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Risk Level Type</mat-label>
						  <input matInput placeholder="Risk Level Type" [(ngModel)]="riskModelTemplate.projectRiskLevelDescription"
                            readonly>
					</mat-form-field-->
					
					
					
                    <mat-form-field fxFlex="30">
                        <input matInput placeholder="Rating Date" [(ngModel)]="riskModelTemplate.ratingDate" readonly>
                    </mat-form-field>
					
					<!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Rating Date</mat-label>
						  <input matInput placeholder="Rating Date" [(ngModel)]="riskModelTemplate.ratingDate" readonly>
					</mat-form-field-->
					
					
                    <mat-form-field fxFlex="30">
                        <input matInput placeholder="Workflow Status" [(ngModel)]="riskModelTemplate.workflowStatusDescription"
                            readonly>
                    </mat-form-field>
					
					<!--mat-form-field fxFlex="25"  appearance="outline">
						<mat-label>Workflow Status</mat-label>
						    <input matInput placeholder="Workflow Status" [(ngModel)]="riskModelTemplate.workflowStatusDescription"
                            readonly>
					</mat-form-field-->
                </div>
            </mat-card>
            <!-- Risk Rating Display Starts Here -->
            <mat-card>
                <!-- Risk Rating Summary Starts Here -->
                <table class="pt-8 pb-16" cellpadding="0" cellspacing="0" style="margin-top:20px;" width="100%" FxFlex="100">
                    <tr class="accent-100 row-header">
                        <th class="column-header mainHeader" colspan="3" width="100%">Risk Rating</th>
                    </tr>
                    <tr class="accent-50 row-header">
                        <th class="column-header" width="50%">Rating Type</th>
                        <th class="column-header" width="25%">Score</th>
                        <th class="column-header" width="25%">Grade</th>
                    </tr>
                    <tr *ngFor="let riskModelSummary of riskModelTemplate.riskModelSummaries">
                        <td class="column-data tableRow">{{ riskModelSummary.name }}</td>
                        <td class="column-data tableRow">{{ riskModelSummary.score }}</td>
                        <td class="column-data tableRow">{{ riskModelSummary.grade }}</td>
                    </tr>
                </table>
                <!-- Risk & Risk Components Ratings Starts Here -->
                <table class="pt-8 pb-16" cellpadding="0" cellspacing="0" width="100%" style="margin-top:20px;" FxFlex="100" *ngFor="let riskType of riskModelTemplate.riskTypes">
                    <tr class="accent-100 row-header">
                        <th class="column-header mainHeader" colspan="2" width="100%">{{ riskType.description }}</th>
                    </tr>
                    <tr class="accent-50 row-header">
                        <th class="column-header" width="50%">Risk Component</th>
                        <th class="column-header" width="50%">Score</th>
                    </tr>
                    <tr *ngFor="let riskComponent of riskType.riskComponents">
                        <td class="column-data tableRow">{{ riskComponent.description }}</td>
                        <td class="column-data tableRow">{{ riskComponent.score }}</td>
                    </tr>
                </table>
            </mat-card>
            <!-- Risk Rating Display Ends Here -->
        </mat-tab>

        <mat-tab class="tabTwo">
            <ng-template mat-tab-label>
                Evaluation
            </ng-template>

            <mat-card  style="margin-bottom: 15px;">
                <!-- Risk Types Starts Here -->
                <mat-tab-group>
                    <mat-tab *ngFor="let riskType of riskModelTemplate.riskTypes">
                        <ng-template mat-tab-label>
                            <mat-icon class="pr-32" *ngIf="checkRiskComponentSelection(riskType)">check</mat-icon>
                            <div>{{ riskType.description }}</div>
                        </ng-template>

                        <!-- Risk Components Starts Here -->
                        <mat-tab-group>
                            <mat-tab *ngFor="let riskComponent of riskType.riskComponents">
                                <ng-template mat-tab-label>
                                    <mat-icon class="pr-32" *ngIf="checkRiskFactorSelection(riskComponent)">check</mat-icon>
                                    <div>{{ riskComponent.description }}</div>
                                </ng-template>

                                <!-- Risk Factors Starts Here -->
                                <mat-tab-group>
                                    <mat-tab *ngFor="let riskFactor of riskComponent.riskFactors">
                                        <ng-template mat-tab-label>
                                            <mat-icon class="pr-32" *ngIf="checkRiskSubFactorSelection(riskFactor)">check</mat-icon>
                                            <div>{{ riskFactor.description }}</div>
                                        </ng-template>

                                        <div class="content" fusePerfectScrollbar style="margin-top:15px;">
                                            <!-- Risk Sub Factors & Attributes Starts Here -->
                                            <mat-card *ngFor="let riskSubFactor of riskFactor.riskSubFactors">
                                                <!--mat-card-header>
                                                    <mat-card-subtitle>
                                                        {{ riskSubFactor.description }}
                                                    </mat-card-subtitle>
                                                </mat-card-header-->
                                                <mat-radio-group class="example-radio-group">
                                                    <table cellpadding="0" cellspacing="0" width="100%" FxFlex="100" style="margin-top:20px;">
													<tr class="accent-100 row-header">
                                        <th class="column-header mainHeader" colspan="3">   {{ riskSubFactor.description }}</th>
                                        
                                    </tr>
                                                        <tr class="accent-100 row-header">
                                                            <th class="column-header" width="10%">Select</th>
                                                            <th class="column-header" width="80%">Parameter
                                                                Selection</th>
                                                            <th class="column-header" width="10%">Score</th>
                                                        </tr>
                                                        <tr *ngFor="let riskSubFactorAttribute of riskSubFactor.riskSubFactorAttributes">
                                                            <td class="column-data tableRow">
                                                                <mat-radio-button class="example-radio-butt>on" [value]="riskSubFactorAttribute.itemNo"
                                                                    [checked]="riskSubFactorAttribute.isSelected"
                                                                    (change)="riskSubFactorSelectionChanged($event, riskSubFactor.riskSubFactorAttributes)">
                                                                </mat-radio-button>
                                                            </td>
                                                            <td class="column-data tableRow">{{
                                                                riskSubFactorAttribute.description
                                                                }}</td>
                                                            <td class="column-data tableRow">
                                                                <span *ngIf="riskSubFactorAttribute.isSelected">{{
                                                                    riskSubFactorAttribute.score }}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </mat-radio-group>
                                            </mat-card>
                                        </div>
                                        <!-- Risk Sub Factors & Attributes Ends Here -->
                                    </mat-tab>
                                </mat-tab-group>
                                <!-- Risk Factors Ends Here -->

                            </mat-tab>
                        </mat-tab-group>
                        <!-- Risk Components Ends Here -->

                    </mat-tab>

                    <!-- Rating Modifiers Starts here -->
                    <mat-tab *ngIf="riskModelTemplate['riskRatingModifiers'] != undefined">
                        <ng-template mat-tab-label>
                            <div>Rating Modifiers</div>
                        </ng-template>

                        <mat-card *ngFor="let riskRatingModifier of riskModelTemplate.riskRatingModifiers">
                            <!--mat-card-header>
                                <mat-card-subtitle>
                                    {{ riskRatingModifier.description }}
                                </mat-card-subtitle>
                            </mat-card-header-->
                            <table cellpadding="0" cellspacing="0" width="100%" FxFlex="100" style="margin-top:20px;">
							<tr class="accent-100 row-header">
                                        <th class="column-header mainHeader" colspan="3"> {{ riskRatingModifier.description }}</th>
                                        
                                    </tr>
                                <tr class="row-header" *ngFor="let riskRatingModifierAttribute of riskRatingModifier.riskRatingModifierAttributes">
                                    <td class="column-data tableRow">{{ riskRatingModifierAttribute.itemNo }}</td>
                                    <td class="column-data tableRow">{{ riskRatingModifierAttribute.description }}</td>
                                    <td class="column-data tableRow">
                                        <mat-slide-toggle [checked]="riskRatingModifierAttribute.yesOrNoIndicator == 'Y'"
                                            (change)="ratingModifierSelectionChanged($event, riskRatingModifierAttribute)"></mat-slide-toggle>
                                    </td>
                                </tr>
                            </table>
                        </mat-card>
                    </mat-tab>
                    <!-- Rating Modifiers Ends here -->

                    <!-- Parental NotchUps Starts here -->
                    <mat-tab *ngIf="riskModelTemplate['riskParentalNotchUps'] != undefined">
					 
							
                        <ng-template mat-tab-label>
                            <div>Parental Notchup</div>
                        </ng-template>

                        <mat-card class="fieldItems">
                            <!--mat-card-header>
                                <mat-card-title>Parental Notchup Criteria</mat-card-title>
                            </mat-card-header-->

                            <div fxLayout="row" class="condition" *ngFor="let parentalCondition of riskModelTemplate['riskParentalNotchUps'][0].riskParentalConditions">
                                <mat-form-field fxFlex>
								
								
                                    <input *ngIf="parentalCondition.category === 0" matInput placeholder="{{parentalCondition.description}}"
                                        [(ngModel)]="parentalCondition.value" required><mat-icon matSuffix class="mr-8">edit</mat-icon>
                                    <input *ngIf="parentalCondition.category === 1" matInput placeholder="{{parentalCondition.description}}"
                                        [(ngModel)]="parentalCondition.value" required>
                                    <mat-select fxFlex="100" *ngIf="parentalCondition.category === 2" placeholder="{{parentalCondition.description}}"
                                        [(ngModel)]="parentalCondition.natureOfRatingOfParentFirm" required>
                                        <mat-option value="0">Short Term</mat-option>
                                        <mat-option value="1">Long Term</mat-option>
                                    </mat-select>
                                    <mat-select fxFlex="100" *ngIf="parentalCondition.category === 3" placeholder="{{parentalCondition.description}}"
                                        [(ngModel)]="parentalCondition.yesNoIndicatorValue" required>
                                        <mat-option value="Y">Yes</mat-option>
                                        <mat-option value="N">No</mat-option>
                                    </mat-select>
                                    <mat-select fxFlex="100" *ngIf="parentalCondition.category === 4" placeholder="{{parentalCondition.description}}"
                                        [(ngModel)]="parentalCondition.yesNoIndicatorValue" required>
                                        <mat-option value="Y">Yes</mat-option>
                                        <mat-option value="N">No</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </mat-card>

                        <mat-card *ngFor="let riskSubFactor of riskModelTemplate['riskParentalNotchUps'][0].riskSubFactors">
                            <!--mat-card-header>
                                <mat-card-subtitle>
                                     {{ riskSubFactor.description }}
                                </mat-card-subtitle>
                            </mat-card-header-->
                            <mat-radio-group class="example-radio-group" FxFlex="100">
                                <table cellpadding="0" cellspacing="0" width="100%" style="margin-top:20px;">
								<tr class="accent-100 row-header ">
                                        <th class="column-header mainHeader" colspan="3">{{ riskSubFactor.description }}</th>
                                        
                                    </tr>
                                    <tr class="accent-100 row-header">
                                        <th class="column-header">Select</th>
                                        <th class="column-header">Parameter Selection</th>
                                        <th class="column-header">Score</th>
                                    </tr>
                                    <tr *ngFor="let riskSubFactorAttribute of riskSubFactor.riskSubFactorAttributes">
                                        <td class="column-data tableRow">
                                            <mat-radio-button class="example-radio-button" [value]="riskSubFactorAttribute.itemNo"
                                                [checked]="riskSubFactorAttribute.isSelected" (change)="parentalNotchUpRiskSubFactorSelectionChanged($event, riskSubFactor.riskSubFactorAttributes)">
                                            </mat-radio-button>
                                        </td>
                                        <td class="column-data tableRow">{{ riskSubFactorAttribute.description }}</td>
                                        <td class="column-data tableRow">
                                            <span *ngIf="riskSubFactorAttribute.isSelected">{{
                                                riskSubFactorAttribute.score }}</span>
                                        </td>
                                    </tr>
                                </table>
                            </mat-radio-group>
                        </mat-card>
                    </mat-tab>
                    <!-- Parental NotchUps Ends here -->
                </mat-tab-group>
                <!-- Risk Types End Here-->
            </mat-card>
        </mat-tab>
    </mat-tab-group>
</div>